<!-- HTML header for doxygen 1.8.9-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="shortcut icon" href="favicon.png" type="image/x-icon"/>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>RandomBallCover: scan_kernels.cl File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="css/font-awesome.min.css" rel="stylesheet">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-57722192-1', 'auto');
  ga('send', 'pageview');
</script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0" style="width: 100%;">
 <tbody>
 <tr style="height: 72px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">RandomBallCover
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
  <td><a id="repo" href="https://github.com/pAIgn10/RandomBallCover"><i class="fa fa-github"></i><span id="repo-text">&nbsp;Hosted by GitHub</span></a></td>
  <td id="projectlogo"><a href="http://paign10.me"><img alt="Logo" src="logo.png"/></a></td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d3fd84b2e4114076d2551689812cf799.html">kernels</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">scan_kernels.cl File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Kernels for performing the <code>Scan</code> operation.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a99c79ac17fbb9b51c5847800dc9c7bd7"><td class="memItemLeft" align="right" valign="top">kernel void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="scan__kernels_8cl.html#a99c79ac17fbb9b51c5847800dc9c7bd7">inclusiveScan</a> (global int4 *in, global int4 *out, local int *data, global int *sums, uint n)</td></tr>
<tr class="memdesc:a99c79ac17fbb9b51c5847800dc9c7bd7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs an inclusive scan operation on the columns of an array.  <a href="#a99c79ac17fbb9b51c5847800dc9c7bd7">More...</a><br /></td></tr>
<tr class="separator:a99c79ac17fbb9b51c5847800dc9c7bd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c7bd5cc4d4a45231e70ecf413b32393"><td class="memItemLeft" align="right" valign="top">kernel void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="scan__kernels_8cl.html#a6c7bd5cc4d4a45231e70ecf413b32393">exclusiveScan</a> (global int4 *in, global int4 *out, local int *data, global int *sums, uint n)</td></tr>
<tr class="memdesc:a6c7bd5cc4d4a45231e70ecf413b32393"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs an exclusive scan operation on the columns of an array.  <a href="#a6c7bd5cc4d4a45231e70ecf413b32393">More...</a><br /></td></tr>
<tr class="separator:a6c7bd5cc4d4a45231e70ecf413b32393"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12d4f8050e84a5ed972ff3326db5188d"><td class="memItemLeft" align="right" valign="top">kernel void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="scan__kernels_8cl.html#a12d4f8050e84a5ed972ff3326db5188d">addGroupSums</a> (global int *sums, global int4 *out, uint n)</td></tr>
<tr class="memdesc:a12d4f8050e84a5ed972ff3326db5188d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds the group sums in the associated blocks.  <a href="#a12d4f8050e84a5ed972ff3326db5188d">More...</a><br /></td></tr>
<tr class="separator:a12d4f8050e84a5ed972ff3326db5188d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Kernels for performing the <code>Scan</code> operation. </p>
<dl class="section author"><dt>Author</dt><dd>Nick Lamprianidis </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2015 </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>The MIT License (MIT) </dd></dl>
<dl class="section user"><dt></dt><dd>Copyright (c) 2015 Nick Lamprianidis </dd></dl>
<dl class="section user"><dt></dt><dd>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: </dd></dl>
<dl class="section user"><dt></dt><dd>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. </dd></dl>
<dl class="section user"><dt></dt><dd>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a12d4f8050e84a5ed972ff3326db5188d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">kernel void addGroupSums </td>
          <td>(</td>
          <td class="paramtype">global int *&#160;</td>
          <td class="paramname"><em>sums</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">global int4 *&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds the group sums in the associated blocks. </p>
<p>It's the second part of the <a href="http://http.developer.nvidia.com/GPUGems3/gpugems3_ch39.html">Blelloch</a> scan algorithm.</p>
<dl class="section note"><dt>Note</dt><dd><code>scan</code> handled <code>2 int4</code> elements per work-item. <code>addGroupSums</code> handles <code>1 int4</code> element per work-item. The global workspace should be \( 2*(wgXdim-1)*lXdim_{scan} \) in the <b>x</b> dimension, and \( M \) in the <b>y</b> dimension. The global workspace should also have an offset \( 2*lXdim_{scan} \) in the <b>x</b> dimension. The local workspace should be \( 2*lXdim_{scan} \) in the <b>x</b> dimension, and <code>1</code> in the <b>y</b> dimension. </dd>
<dd>
This part should follow after a scan has been performed on the group sums.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sums</td><td>(scan) array of work-group sums. Its size is \(M \times wgXdim\). </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">out</td><td>(scan) output array of <code>int</code> elements (before processing, it contains the block scans performed in a previous step. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n</td><td>the number of elements in a row of the array divided by 4. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a6c7bd5cc4d4a45231e70ecf413b32393"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">kernel void exclusiveScan </td>
          <td>(</td>
          <td class="paramtype">global int4 *&#160;</td>
          <td class="paramname"><em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">global int4 *&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">local int *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">global int *&#160;</td>
          <td class="paramname"><em>sums</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs an exclusive scan operation on the columns of an array. </p>
<p>The parallel scan algorithm by <a href="http://http.developer.nvidia.com/GPUGems3/gpugems3_ch39.html">Blelloch</a> is implemented.</p>
<dl class="section note"><dt>Note</dt><dd>When there are multiple rows in the array, a scan operation is performed per row, in parallel. </dd>
<dd>
The number of elements, <code>N</code>, in a row of the array should be a <b>multiple of 4</b> (the data are handled as <code>int4</code>). The <b>x</b> dimension of the global workspace, \( gXdim \), should be greater or equal to the number of elements in a row of the array divided by 8. That is, \( \ gXdim \geq N/8 \). Each work-item handles <code>8 float</code> (= <code>2 float4</code>) elements in a row of the array. The <b>y</b> dimension of the global workspace, \( gYdim \), should be equal to the number of rows, <code>M</code>, in the array. That is, \( \ gYdim = M \). The local workspace should be <code>1</code> in the <b>y</b> dimension, and a <b>power of 2</b> in the <b>x</b> dimension. It is recommended to use one <code>wavefront/warp</code> per work-group. </dd>
<dd>
When the number of elements per row of the array is small enough to be handled by a single work-group, the output array will contain the true scan result. When the elements are more than that, they are partitioned into blocks and scanned independently. In this case, the kernel outputs the results from each block scan operation. A scan should then be made on the sums of the elements of each block per row. Finally, the results from the last block-sums scan should be added in the corresponding block. The number of work-groups in the <b>x</b> dimension, \( wgXdim \), <b>for the case of multiple work-groups</b>, should be made a <b>multiple of 4</b>. The potential extra work-groups are used for enforcing correctness. They write the necessary identity operands, <code>0</code>, in the sums array, since in the next phase the sums array is going to be handled as <code>int4</code>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">in</td><td>input array of <code>int</code> elements. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">out</td><td>(scan per work-group) output array of <code>int</code> elements. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>local buffer. Its size should be <code>2 int</code> elements for each work-item in a work-group. That is \( 2*lXdim*sizeof\ (int) \). </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">sums</td><td>array of block sums. Each work-group outputs the sum of its elements. It's size should be \( M \times wgXdim \). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n</td><td>the number of elements in a row of the array divided by 4. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a99c79ac17fbb9b51c5847800dc9c7bd7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">kernel void inclusiveScan </td>
          <td>(</td>
          <td class="paramtype">global int4 *&#160;</td>
          <td class="paramname"><em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">global int4 *&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">local int *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">global int *&#160;</td>
          <td class="paramname"><em>sums</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs an inclusive scan operation on the columns of an array. </p>
<p>The parallel scan algorithm by <a href="http://http.developer.nvidia.com/GPUGems3/gpugems3_ch39.html">Blelloch</a> is implemented.</p>
<dl class="section note"><dt>Note</dt><dd>When there are multiple rows in the array, a scan operation is performed per row, in parallel. </dd>
<dd>
The number of elements, <code>N</code>, in a row of the array should be a <b>multiple of 4</b> (the data are handled as <code>int4</code>). The <b>x</b> dimension of the global workspace, \( gXdim \), should be greater or equal to the number of elements in a row of the array divided by 8. That is, \( \ gXdim \geq N/8 \). Each work-item handles <code>8 float</code> (= <code>2 float4</code>) elements in a row of the array. The <b>y</b> dimension of the global workspace, \( gYdim \), should be equal to the number of rows, <code>M</code>, in the array. That is, \( \ gYdim = M \). The local workspace should be <code>1</code> in the <b>y</b> dimension, and a <b>power of 2</b> in the <b>x</b> dimension. It is recommended to use one <code>wavefront/warp</code> per work-group. </dd>
<dd>
When the number of elements per row of the array is small enough to be handled by a single work-group, the output array will contain the true scan result. When the elements are more than that, they are partitioned into blocks and scanned independently. In this case, the kernel outputs the results from each block scan operation. A scan should then be made on the sums of the elements of each block per row. Finally, the results from the last block-sums scan should be added in the corresponding block. The number of work-groups in the <b>x</b> dimension, \( wgXdim \), <b>for the case of multiple work-groups</b>, should be made a <b>multiple of 4</b>. The potential extra work-groups are used for enforcing correctness. They write the necessary identity operands, <code>0</code>, in the sums array, since in the next phase the sums array is going to be handled as <code>int4</code>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">in</td><td>input array of <code>int</code> elements. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">out</td><td>(scan per work-group) output array of <code>int</code> elements. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>local buffer. Its size should be <code>2 int</code> elements for each work-item in a work-group. That is \( 2*lXdim*sizeof\ (int) \). </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">sums</td><td>array of block sums. Each work-group outputs the sum of its elements. It's size should be \( M \times wgXdim \). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n</td><td>the number of elements in a row of the array divided by 4. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu May 14 2015 15:01:19 for RandomBallCover by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
